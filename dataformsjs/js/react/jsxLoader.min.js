// @link https://www.dataformsjs.com
// @author Conrad Sollitt (http://www.conradsollitt.com)
// @license MIT
!function(){"use strict";for(var x={js:0,e_start:1,e_end:2,e_prop:3,e_value:4,e_child_text:5,e_child_js:6,e_child_whitespace:7,e_child_js_start:8,e_child_js_end:9},L={program:0,js:1,createElement:2},e=[x,L],t=0,n=e.length;t<n;t++){var r=e[t];for(var a in r)r.hasOwnProperty(a)&&(r[a]=a)}var g={polyfillUrl:"https://polyfill.io/v3/polyfill.min.js?features=Array.from,Array.isArray,Array.prototype.find,Object.assign,Object.keys,URL,fetch,Promise,Promise.prototype.finally,String.prototype.endsWith,String.prototype.startsWith,String.prototype.includes,String.prototype.repeat,WeakSet,Symbol,Number.isInteger,String.prototype.codePointAt,String.fromCodePoint",babelUrl:"https://unpkg.com/@babel/standalone@7.8.4/babel.min.js",babelOptions:{presets:["es2015","react"]},logCompileTime:!1,logCompileDetails:!1,evalCode:"class foo {}; let result = 1 + 1;",needsPolyfill:!(Array.from&&window.Promise&&window.fetch&&Promise.prototype.finally),jsUpdates:[{find:/export function/g,replace:"function"},{find:/export default class/g,replace:"class"},{find:/import React from 'react';/g,replace:""},{find:/import React from"react";/g,replace:""}],isSupportedBrowser:null,maxRecursiveCalls:1e3,usePreact:function(){this.jsUpdates.push({find:/ReactDOM\.render/g,replace:"preact.render"}),this.jsUpdates.push({find:/React\.Component/g,replace:"preact.Component"}),this.jsUpdates.push({find:/React\.Fragment/g,replace:"preact.Fragment"}),this.jsUpdates.push({find:/React\.createElement/g,replace:"preact.createElement"}),this.jsUpdates.push({find:/React\.cloneElement/g,replace:"preact.cloneElement"}),this.jsUpdates.push({find:/React\.createRef/g,replace:"preact.createRef"}),this.jsUpdates.push({find:/onChange:/g,replace:"onInput:"}),this.jsUpdates.push({find:/import preact from 'preact';/g,replace:""}),this.jsUpdates.push({find:/import preact from"preact";/g,replace:""}),this.addBabelPolyfills=function(){window.exports=window,window.require=function(e){switch(e){case"react":case"react-dom":return window.preact;default:return window[e]}}}},hasPendingScripts:function(){return 0<document.querySelectorAll('script[type="text/babel"]:not([data-added-to-page])').length},setup:function(){var e=document.querySelectorAll('script[type="text/babel"]:not([data-added-to-page])');if(1!==e.length){var t=[],n=[];Array.prototype.forEach.call(e,function(e){""===e.src?n.push(e):t.push(g.loadScript(e))}),Promise.all(t).finally(function(){n.forEach(function(e){g.loadScript(e)})})}else g.loadScript(e[0])},loadScript:function(s){function n(e,t,n){var r,a,i=new Date;(g.logCompileTime||g.logCompileDetails)&&(console.log("=".repeat(80)),console.log(s.src),console.log("Start time: "+i.getTime()));try{a=g.isSupportedBrowser?(r=g.compiler.compile(e),"jsxLoader"):(r=Babel.transform(e,g.babelOptions).code,"Babel")}catch(e){console.log("-".repeat(80)),console.log("Compile Error:"),console.log(s),console.error(e),s.setAttribute("data-error",e.toString()),r=null}if(g.logCompileDetails&&console.log(r),g.logCompileTime||g.logCompileDetails){var l=new Date;console.log("End time: "+l.getTime()),console.log("Time taken (in milliseconds): "+(l.getTime()-i.getTime()))}if(null!==r){g.jsUpdates.forEach(function(e){r=r.replace(e.find,e.replace)});var o=document.createElement("script");n&&o.setAttribute("data-src",n),o.setAttribute("data-compiler",a),o.innerHTML=r,document.head.appendChild(o),t()}else t()}return new Promise(function(t){if(""===s.src)return n(s.innerHTML,t),void s.setAttribute("data-added-to-page","");fetch(s.src,null,"text/plain").then(function(e){var t=e.status;if(200<=t&&t<300||304===t)return e.text();throw new Error("Error loading data. Server Response Code: "+t+", Response Text: "+e.statusText)}).then(function(e){n(e,t,s.getAttribute("src")),s.setAttribute("data-added-to-page","")}).catch(function(e){console.error(e),s.setAttribute("data-added-to-page",""),s.setAttribute("data-error",e.toString()),t()})})},addBabelPolyfills:function(){window.exports=window,window.require=function(e){switch(e){case"react":return window.React;case"react-dom":return window.ReactDOM;default:return window[e]}}},downloadScript:function(e,t){var n=document.createElement("script");n.onload=t,n.onerror=function(){console.error("Error loading Script: "+e),t()},n.src=e,document.head.appendChild(n)},addAdditionalPolyfills:function(){void 0===String.prototype.trimLeft&&(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")}),void 0===String.prototype.trimStart&&(String.prototype.trimStart=String.prototype.trimLeft),void 0===String.prototype.trimRight&&(String.prototype.trimRight=function(){return this.replace(/\s+$/,"")}),void 0===String.prototype.trimEnd&&(String.prototype.trimEnd=String.prototype.trimRight)},compiler:{compile:function(e){if(this.isMinimized(e))return e;var t=this.removeComments(e),n=this.tokenizer(t);g.logCompileDetails&&console.log(n);var r=this.parser(n,e);return g.logCompileDetails&&console.log(r),this.codeGenerator(r,e)},getTextPosition:function(e,t){var n=e.substr(0,t).split("\n"),r=n.length,a=n[r-1];return" at Line #: "+r+", Column #: "+(a.length-1)+", Line: "+a.trim()},isMinimized:function(e){return-1===e.indexOf("\n")&&(-1!==e.indexOf("if(")||-1!==e.indexOf("}render(){return"))},removeComments:function(e){var t,n,r=e.length,a=new Array(r),i={inCommentReact:!1,inCommentSingleLine:!1,inCommentMultiLine:!1,inStringSingleQuote:!1,inStringDoubleQuote:!1,inStringMultiLine:!1,elementCount:0,jsCount:0},l=0;function o(){return l<r-1?e[l+1]:null}function s(){return l<r-2?e[l+1]+e[l+2]:null}for(;l<r;){if(t=e[l],i.inCommentReact)"*"===t&&"/}"===s()?(a[l]=" ",a[l+1]=" ",l+=2,t=" ",i.inCommentReact=!1):"\n"!==t&&(t=" ");else if(i.inCommentSingleLine)"\n"===t?i.inCommentSingleLine=!1:t=" ";else if(i.inCommentMultiLine)"*"==t&&"/"===o()?(a[l]=" ",l++,t=" ",i.inCommentMultiLine=!1):"\n"!==t&&(t=" ");else if(i.inStringDoubleQuote)'"'===t&&"\\"!==e[l-1]&&(i.inStringDoubleQuote=!1);else if(i.inStringSingleQuote)"'"===t&&"\\"!==e[l-1]&&(i.inStringSingleQuote=!1);else if(i.inStringMultiLine)"`"===t&&(i.inStringMultiLine=!1);else switch(t){case"{":"/*"===s()?(a[l]=" ",a[l+1]=" ",l+=2,t=" ",i.inCommentReact=!0):0<i.elementCount&&i.jsCount++;break;case"}":0<i.elementCount&&0<i.jsCount&&i.jsCount--;break;case"/":if(0===i.elementCount||0<i.jsCount){var c=o();i.inCommentSingleLine="/"===c,i.inCommentSingleLine||(i.inCommentMultiLine="*"===c),(i.inCommentSingleLine||i.inCommentMultiLine)&&(a[l]=" ",l++,t=" ")}break;case'"':i.inStringDoubleQuote=!0;break;case"'":i.inStringSingleQuote=!0;break;case"`":i.inStringMultiLine=!0;break;case"<":n=o(),/[a-zA-Z]/.test(n)||">"===n?i.elementCount++:"/"===n&&i.elementCount--;break;case">":"/"===e[l-1]&&0<i.elementCount&&i.elementCount--}a[l]=t,l++}return a.join("")},tokenizer:function(a){var i,l,o,s=a.length,c=0,u=[],e=0,p=0;function t(){for(var e,t=c,n={inStringSingleQuote:!1,inStringDoubleQuote:!1,inStringMultiLine:!1};t<s-1;){if(e=a[t],n.inStringDoubleQuote)'"'===e&&"\\"!==a[t-1]&&(n.inStringDoubleQuote=!1);else if(n.inStringSingleQuote)"'"===e&&"\\"!==a[t-1]&&(n.inStringSingleQuote=!1);else if(n.inStringMultiLine)"`"===e&&(n.inStringMultiLine=!1);else switch(e){case'"':n.inStringDoubleQuote=!0;break;case"'":n.inStringSingleQuote=!0;break;case"`":n.inStringMultiLine=!0;break;case"<":if(" "!==a[t+1])return t}t++}return null}function d(){return c<s?a[c]:null}function m(){if(s<++e)throw new Error("Endless loop encountered in tokenizer")}function h(e,t){if(++p>g.maxRecursiveCalls)throw new Error("Call count exceeded in tokenizer. If you have a large JSX file that is valid you can increase them limit using the property `jsxLoader.maxRecursiveCalls`.");var n={value:a[l],elementStack:0,elementState:[],currentElementState:null,inElement:!0,hasElementName:!1,elementClosed:!1,closeElement:!1,closingElement:!1,fatalError:!1,errorMessage:null,addElementEnd:!1,breakLoop:!1,addChild:!1,addChar:!0,hasProp:!1,inValue:!1,inPropString:!1,propStringChar:null,jsWithElement:!1};for(c<e&&t&&u.push({type:x.js,value:a.substring(c,e),pos:c}),c=e+1;c<s;){if(m(),i=a[c],n.inElement){if(n.hasElementName)for(n.value+=i,c++,n.breakLoop=!1,n.hasProp=!1,n.inValue=!1;c<s;)if(m(),i=a[c],c++,n.inPropString&&i!==n.propStringChar)n.value+=i;else{switch(i){case"=":if(n.currentElementState.inPropJs)break;""!==n.value.trim()&&(u.push({type:x.e_prop,value:n.value,pos:c}),n.hasProp=!0,n.inValue=!0),n.value="",'"'===(o=d())||"'"===o?(n.inPropString=!0,n.propStringChar=o,c++):"{"===o&&(n.currentElementState.inPropJs=!0,n.currentElementState.jsPropBracketCount=0,c++);continue;case n.propStringChar:if(n.inPropString){n.inPropString=!1,u.push({type:n.hasProp?x.e_value:x.e_prop,value:JSON.stringify(n.value),pos:c}),n.inValue=!1,n.hasProp=!1,n.value="";continue}break;case"}":if(n.currentElementState.inPropJs){if(0===n.currentElementState.jsPropBracketCount){n.currentElementState.inPropJs=!1,""!==n.value.trim()&&(n.jsWithElement?(u.push({type:x.e_child_js_end,value:n.value,pos:c}),n.jsWithElement=!1):">"!==n.value.trim()&&(u.push({type:x.e_value,value:n.value,pos:c}),n.hasProp=!1)),n.inValue=!1,n.value="";continue}n.currentElementState.jsPropBracketCount--}break;case" ":case"\t":case"\r":case"\n":n.currentElementState.inPropJs||(""!==n.value.trim()&&u.push({type:n.hasProp?x.e_value:x.e_prop,value:n.value,pos:c}),n.inValue=!1,n.value="");break;case"/":">"===d()&&(c--,n.breakLoop=!0,n.hasElementName=!1);break;case"<":n.currentElementState.inPropJs&&" "!==d()&&(""!==n.value.trim()&&(u.push({type:x.e_child_js_start,value:n.value,pos:c}),n.value="",n.jsWithElement=!0),h(--c,!1),i="",n.jsWithElement&&c++);break;case"{":n.currentElementState.inPropJs&&n.currentElementState.jsPropBracketCount++;break;case">":n.currentElementState.inPropJs||(n.breakLoop=!0,n.hasElementName=!1)}if(n.breakLoop){if("/"===n.value&&">"===i&&u[u.length-1].type===x.e_start){if(u.push({type:x.e_end,value:n.value+i,pos:c}),n.elementStack<=1)return void("}"!==d()&&c--);n.elementStack--,n.elementState.pop(),n.currentElementState=0===n.elementStack?null:n.elementState[n.elementStack-1]}else if(">"===i&&(/^[a-zA-Z1-9-_]*$/.test(n.value)||/{\.\.\.(.+)}/.test(n.value))&&u[u.length-1].type===x.e_start)u.push({type:x.e_prop,value:n.value,pos:c});else if(""!==n.value.trim())throw console.log(u),new Error("Unhandled character in element properties: `"+n.value+"`"+g.compiler.getTextPosition(a,c));n.value="",n.breakLoop=!1;break}n.value+=i}switch(i){case"/":""===n.value||"<"===n.value?n.closingElement=!0:">"===d()?(n.closeElement=!0,n.inElement=!1,n.addElementEnd=!0):(n.fatalError=!0,n.errorMessage='Error found a "/" character in element ['+n.value+'] but not closing "/>"'+g.compiler.getTextPosition(a,c));break;case">":n.closeElement=!0,n.inElement=!1;break;case" ":case"\t":case"\n":case"\r":n.hasElementName=!0,n.closeElement=!0}}else{switch(i){case"}":n.currentElementState.inJs&&(0===n.currentElementState.jsBracketCount?(n.currentElementState.inJs=!1,n.currentElementState.closeJs=!0,n.addChild=!0,n.addChar=!1):n.currentElementState.jsBracketCount--);break;case"{":n.currentElementState.inJs?n.currentElementState.jsBracketCount++:(n.currentElementState.inJs=!0,n.currentElementState.jsBracketCount=0,n.addChild=!0,n.addChar=!1);break;case"<":" "!==d()&&(n.addChild=!0,n.inElement=!0)}if(n.addChild){if(""===n.value.trim())""!==n.value&&u.push({type:x.e_child_whitespace,value:n.value,pos:c});else{var r=n.currentElementState.closeJs||n.currentElementState.inJs&&0<n.currentElementState.jsBracketCount||n.currentElementState.inJs&&n.inElement;u.push({type:r?x.e_child_js:x.e_child_text,value:n.value,pos:c})}n.addChild=!1,n.value="",n.currentElementState.closeJs&&(n.currentElementState.closeJs=!1,n.currentElementState.inJs=!1)}}if(n.closeElement?(" "!==i&&"\t"!==i&&"\n"!==i&&"\r"!==i&&(n.value+=i),n.closingElement?(u.push({type:x.e_end,value:n.value,pos:c}),n.hasElementName=!1,n.elementStack--,n.elementState.pop(),n.currentElementState=0===n.elementStack?null:n.elementState[n.elementStack-1],0===n.elementStack&&(n.elementClosed=!0)):">"===n.value?c--:(u.push({type:x.e_start,value:n.value,pos:c}),n.elementStack++,n.currentElementState={inJs:!1,jsBracketCount:0,closeJs:!1,inPropJs:!1,jsPropBracketCount:0},n.elementState.push(n.currentElementState)),n.value="",n.closeElement=!1,n.closingElement=!1,n.addElementEnd&&(u.push({type:x.e_end,value:n.value,pos:null}),n.addElementEnd=!1)):(n.addChar&&(n.value+=i),n.addChar=!0),n.elementClosed)break;c++}if(n.fatalError)throw console.log(u),new Error(n.errorMessage)}for(;c<s;){if(m(),null===(l=t())){u.push({type:x.js,value:a.substring(c,s),pos:c});break}h(l,!0),c++}return u},parser:function(c,u){var p=0,d={type:L.program,body:[],pos:null},m=0,h=c.length;function f(e){if(++m>g.maxRecursiveCalls)throw new Error("Call count exceeded in parser. If you have a large JSX file that is valid you can increase them limit using the property `jsxLoader.maxRecursiveCalls`.");var t=c[p];if(p++,t.type===x.js)return{type:L.js,value:t.value,pos:t.pos,stackCount:e};if(t.type!==x.e_start)throw new Error("Tokens are out of order 2: ["+t.type+"], Token #: "+t.index+g.compiler.getTextPosition(u,t.pos));var n=t.value.replace("<","").replace("/","").replace(">","");""===n&&(n="React.Fragment");for(var r,a=n[0],i={type:L.createElement,name:n,isClass:"A"<=a&&a<="Z"||-1!==n.indexOf("."),props:[],children:[],pos:t.pos,stackCount:e},l=!1;p<h;){switch(t=c[p],p++,t.type){case x.e_prop:var o={name:t.value,value:null,pos:t.pos};switch(p<h?c[p].type:null){case x.e_value:case x.js:o.value=c[p].value,p++;break;case x.e_start:o.value=f(e+1)}""!==o.name.trim()&&i.props.push(o);break;case x.e_child_js:""!==t.value.trim()&&(0===(r=t.value.trim()).indexOf("{")&&(r=r.substr(1)),"}"===r.substr(r.length-1,1)&&(r=r.substr(0,r.length-1)),i.children.push({type:t.type,value:r,pos:t.pos}));break;case x.e_child_js_start:case x.e_child_js_end:i.children.push({type:t.type,value:r,pos:t.pos});break;case x.e_child_text:""!==t.value.trim()&&i.children.push({type:t.type,value:t.value,pos:t.pos});break;case x.e_child_whitespace:i.children.push({type:t.type,value:t.value,pos:t.pos});break;case x.e_end:var s=t.value.replace("<","").replace("/","").replace(">","");if(s!==i.name&&""!==s)throw new Error("Found closing element ["+s+"] that does not match opening element ["+i.name+"] from Token # "+t.index+g.compiler.getTextPosition(u,t.pos));l=!0;break;case x.e_start:p--,i.children.push({type:x.e_start,value:f(e+1),pos:t.pos});break;default:throw console.log(c),console.log(d),new Error("Tokens are out of order 1: ["+t.type+"], Token #: "+t.index+g.compiler.getTextPosition(u,t.pos))}if(l)break}return i}for(var e=0;e<h;e++)c[e].index=e;for(;p<h;)d.body.push(f(0));return d},codeGenerator:function(e,t){var P="React.createElement",n=/(\/\/|\/\*|\/\*\*)\s+@jsx\s+([a-zA-z.]+)/gm.exec(t);return n&&(P=n[2]),function e(t,n){switch(t.type){case L.program:return t.body.map(e).join("");case L.js:return t.value;case L.createElement:var r=P+"("+(t.isClass?t.name:JSON.stringify(t.name))+", ";0<t.stackCount&&(r=!0!==n?"\n"+" ".repeat(8)+" ".repeat(4*t.stackCount)+r:" "+r);var a,i=t.props.length,l=[];if(0===i)r+="null";else{r+="{";for(var o=0;o<i;o++){var s=t.props[o].value;null===s?s="true":"string"!=typeof s&&(s=e(s,!0)),-1!==(a=t.props[o].name.trim()).indexOf("-")&&(a=JSON.stringify(a)),"true"===s&&/{\.\.\.(.+)}/.test(a)?l.push(a.substr(0,a.length-1).substr(1)+(o===i-1?"":", ")):l.push(a+": "+s+(o===i-1?"":", "))}var c=l.reduce(function(e,t){return e+=t.length},0);if(80<c){var u="\n";!0!==n&&(u+=" ".repeat(12)+" ".repeat(4*t.stackCount)),r+=u+l.join(u)}else r+=l.join("");r+="}"}var p,d,m=[],h=!1,f=!1,g=!1,v=!1,S=t.children.length,y=null,E=0,b=!1,C=!0;for(d=0;d<S;d++)switch(t.children[d].type){case x.e_child_js:case x.e_child_js_start:f=!0,"string"==typeof(p=t.children[d].value)&&-1===p.indexOf("(")&&-1===p.indexOf(")")&&(C=!1);break;case x.e_child_text:h=!0;break;case x.e_start:g=!0,E++;break;case x.e_child_whitespace:case x.e_child_js_end:break;default:throw new Error("Unhandled child type codeGenerator(): "+t.children[d].type)}for(d=0;d<S;d++){switch(t.children[d].type){case x.e_child_js:case x.e_child_js_start:b?m[m.length-1]+=t.children[d].value:(m.push(t.children[d].value),v||1!==m.length||(v=!0));break;case x.e_child_text:if(-1!==(p=t.children[d].value).indexOf("&")){var _=document.createElement("div");_.innerHTML=p,p=_.textContent}1===S?m.push(JSON.stringify(p)):d===S-1?m.push(JSON.stringify(p.replace(/\s+$/,""))):0===d?m.push(JSON.stringify(p.replace(/^\s+/,""))):m.push(JSON.stringify(p));break;case x.e_child_js_end:m.push(t.children[d].value);break;case x.e_start:var k=!1,w=!1;if(null!==y&&(k=t.children[y].type===x.e_child_js),k){var j=t.children[y].value.trim();(j.endsWith("&&")||j.endsWith("?")||j.endsWith("(")||j.endsWith(":")||j.endsWith(" return"))&&(m[m.length-1]+=e(t.children[d].value,k),E--,b=w=!0)}w||(m.push(e(t.children[d].value,k)),b=!1);break;case x.e_child_whitespace:(f||h)&&0!==d&&d!==S-1&&(m.push(JSON.stringify(t.children[d].value)),b=!1);continue;default:throw new Error("Unhandled child type codeGenerator(): "+t.children[d].type)}y=d}return 0<m.length&&(r+=!h&&f&&g&&v&&1===E&&C?", "+m.join(""):", "+m.join(", ")),r+=")";default:throw new TypeError("Unhandled AST type in codeGenerator: "+t.type)}}(e)}}};window.jsxLoader=g,document.addEventListener("DOMContentLoaded",function(){try{new Function('"use strict";'+g.evalCode)(),g.isSupportedBrowser=!0}catch(e){g.isSupportedBrowser=!1}g.isSupportedBrowser&&!1===g.needsPolyfill?g.setup():g.isSupportedBrowser?g.downloadScript(g.polyfillUrl,function(){g.addAdditionalPolyfills(),g.setup()}):(g.addBabelPolyfills(),g.downloadScript(g.polyfillUrl,function(){g.addAdditionalPolyfills(),g.downloadScript(g.babelUrl,function(){g.setup()})}))})}();