!function(){"use strict";var c=["excludes","excludes_list","!==","==="],f=!0;var p={getSettings:function(t){var e=(t||document).querySelectorAll("[data-filter-selector]"),l=[];return Array.prototype.forEach.call(e,function(t){l.push(function(e){var t,l,r,i,a,n=e.getAttribute("data-filter-selector"),o=e.getAttribute("data-filter-results-text-selector"),s={itemsSelector:n,items:null===n?null:document.querySelectorAll(n),columnFilter:e.getAttribute("data-filter-column"),resultsTextSelector:o,resultsTextElement:null===o?null:document.querySelector(o),textAll:e.getAttribute("data-filter-results-text-all"),textFiltered:e.getAttribute("data-filter-results-text-filtered"),filterHideOnEmpty:e.getAttribute("data-filter-results-text-hide-on-empty"),dataList:null===e.getAttribute("list")?e.getAttribute("data-list"):e.getAttribute("list"),cssOdd:e.getAttribute("data-filter-class-odd"),cssEven:e.getAttribute("data-filter-class-even"),colIndex:null,clickedFilter:e.getAttribute("data-filter-clicked"),operator:e.getAttribute("data-filter-operator"),filterValue:e.getAttribute("data-filter-value"),filterWords:[],containsInputs:n&&null!==document.querySelector(n+" input")};function u(t){throw console.log(t),console.log(e),console.log(s),t}if(null===s.items)return s;for(null!==s.operator&&(null===s.filterValue?u("Filter if attribute [data-filter-operator] is defined then the attribute [data-filter-value] must also be defined."):-1===c.indexOf(s.operator)&&u("Filter if attribute [data-filter-operator] is defined then it must equal one of the following operators: ['"+c.join("', '")+"'].")),l=0,r=(t="INPUT"===e.nodeName?e.value.toLowerCase().trim().split(" "):(null===s.filterValue&&u("Filter Element requires missing attribute [data-filter-value]."),null===s.clickedFilter?[]:"excludes_list"===s.operator?s.filterValue.toLowerCase().trim().split("|"):"!=="===s.operator||"==="===s.operator?(s.filterValue=s.filterValue.toLowerCase(),[s.filterValue]):s.filterValue.toLowerCase().trim().split(" "))).length;l<r;l++)""!==t[l]&&s.filterWords.push(t[l]);if(null!==s.columnFilter){for(1===s.items.length&&"TABLE"===s.items[0].tagName&&s.items[0].tHead&&1===s.items[0].tHead.rows.length&&1===s.items[0].tBodies.length||u("Column filter requires a table to be correctly defined"),i=document.querySelector(s.itemsSelector),s.items=i.tBodies[0].rows,a=i.tHead.rows.length-1,l=0,r=i.tHead.rows[a].cells.length;l<r;l++)if(i.tHead.rows[a].cells[l].textContent.trim()===s.columnFilter){s.colIndex=l;break}null===s.colIndex&&u("Column ["+s.columnFilter+"] was not found in the table to filter.")}else 1===s.items.length&&"TABLE"===s.items[0].tagName&&1===s.items[0].tBodies.length&&(i=s.items[0],s.items=i.tBodies[0].rows,null===s.cssOdd&&null===s.cssEven&&(s.cssOdd=i.getAttribute("data-sort-class-odd"),s.cssEven=i.getAttribute("data-sort-class-even")));return s}(t))}),l},filter:function(){var t,n,e,l,r,i,a,o,s,u=[],c=!1;function d(t,e){var l,r,i,a="",n=null;if(null===t.colIndex?(a=e.textContent.toLowerCase(),n=t.containsInputs?e.querySelectorAll("input"):null):e.cells.length>=t.colIndex&&(a=e.cells[t.colIndex].textContent.toLowerCase(),n=t.containsInputs?e.cells[t.colIndex].querySelectorAll("input"):null),null!==n)for(l=0,r=n.length;l<r;l++)a+=" "+n[l].value;switch(t.operator){case"===":if(a!==t.filterValue)return e.style.display="none",!0;break;case"!==":if(a===t.filterValue)return e.style.display="none",!0;break;case"excludes":for(i=!1,l=0,r=t.filterWords.length;l<r;l++)if(-1!==a.indexOf(t.filterWords[l])){i=!0;break}if(i)return e.style.display="none",!0;break;case"excludes_list":for(i=!1,l=0,r=t.filterWords.length;l<r;l++)if(a===t.filterWords[l]){i=!0;break}if(i)return e.style.display="none",!0;break;default:for(l=0,r=t.filterWords.length;l<r;l++)if(-1===a.indexOf(t.filterWords[l]))return e.style.display="none",!0}return!1}if(f){if(t=p.getSettings(),n=document.querySelectorAll("[data-filter-clear]"),e=document.querySelectorAll("[data-filter-clear-all]"),1===t.length){if(null!==t[0].items)if(r=t[0].items,0===t[0].filterWords.length)for(l=0,i=r.length;l<i;l++)""!==r[l].style.display&&(r[l].style.display=""),r[l].removeAttribute("data-filter-item");else for(l=0,i=r.length;l<i;l++)(s=d(t[0],r[l]))||""===r[l].style.display||(r[l].style.display=""),r[l].setAttribute("data-filter-item",s?"hide":"show")}else{for(a=0,o=t.length;a<o;a++)if(null!==(r=t[a].items))for(l=0,i=r.length;l<i;l++)""!==r[l].style.display&&(r[l].style.display=""),r[l].removeAttribute("data-filter-item");for(a=0,o=t.length;a<o;a++)if(null!==(r=t[a].items)&&0<t[a].filterWords.length)for(l=0,i=r.length;l<i;l++)s=d(t[a],r[l]),r[l].setAttribute("data-filter-item",s?"hide":"show")}t.forEach(function(e){var l=0,t="",r=!0,i=e.itemsSelector,a=e.cssEven&&e.cssOdd;-1===u.indexOf(i)&&(Array.prototype.forEach.call(e.items,function(t){""===t.style.display?(l++,a&&(l%2==0?(t.classList.add(e.cssEven),t.classList.remove(e.cssOdd)):(t.classList.add(e.cssOdd),t.classList.remove(e.cssEven)))):c=!(r=!1)}),null!==e.resultsTextElement&&null!==e.textAll&&null!==e.textFiltered&&(t=(t=e.items.length===l?e.textAll:e.textFiltered.replace(/{displayCount}/g,l)).replace(/{totalCount}/g,e.items.length),e.resultsTextElement.textContent=t,null!==e.filterHideOnEmpty&&(e.resultsTextElement.style.display=""===t?"none":"")),Array.prototype.forEach.call(n,function(t){t.getAttribute("data-filter-clear")===i&&(t.style.display=r?"none":"")}),u.push(i))}),Array.prototype.forEach.call(e,function(t){t.style.display=c?"":"none"})}},setupDataLists:function(t){this.getSettings(t).forEach(function(l){if(null!==l.items&&null!==l.dataList){var r=document.getElementById(l.dataList);if(null===r&&(r=document.querySelector(l.dataList)),null!==r&&"DATALIST"===r.tagName){var i=[];Array.prototype.forEach.call(l.items,function(t){var e="";null===l.colIndex?e=t.textContent:t.cells.length>=l.colIndex&&(e=t.cells[l.colIndex].textContent),""!==e&&-1===i.indexOf(e)&&i.push(e)}),i.sort(),r.innerHTML="",i.forEach(function(t){var e=document.createElement("option");e.textContent=t,r.appendChild(e)})}}})},clearClickedFilters:function(e){var t=document.querySelectorAll("[data-filter-selector][data-filter-clicked]");Array.prototype.forEach.call(t,function(t){t.getAttribute("data-filter-selector")===e&&t.removeAttribute("data-filter-clicked")})},clearFilter:function(e){var t=document.querySelectorAll("input[data-filter-selector],[data-filter-selector][data-filter-clicked]");Array.prototype.forEach.call(t,function(t){t.getAttribute("data-filter-selector")===e&&("INPUT"===t.nodeName?t.value="":t.removeAttribute("data-filter-clicked"))})},clearAllFilters:function(){var t=document.querySelectorAll("input[data-filter-selector],[data-filter-selector][data-filter-clicked]");Array.prototype.forEach.call(t,function(t){"INPUT"===t.nodeName?t.value="":t.removeAttribute("data-filter-clicked")})},setupFilters:function(t){var e=(t||document).querySelectorAll("[data-filter-selector]:not([data-filter-setup])");Array.prototype.forEach.call(e,function(t){"INPUT"===t.nodeName?t.addEventListener("input",p.filter):(t.addEventListener("click",function(){p.clearClickedFilters(this.getAttribute("data-filter-selector")),this.setAttribute("data-filter-clicked",""),p.filter()}),t.style.cursor="pointer"),t.setAttribute("data-filter-setup","setup")}),e=document.querySelectorAll("[data-filter-clear]:not([data-filter-setup])"),Array.prototype.forEach.call(e,function(t){t.addEventListener("click",function(){f=!1,p.clearFilter(this.getAttribute("data-filter-clear")),f=!0,p.filter()}),t.setAttribute("data-filter-setup","setup")}),e=document.querySelectorAll("[data-filter-clear-all]:not([data-filter-setup])"),Array.prototype.forEach.call(e,function(t){t.addEventListener("click",function(){f=!1,p.clearAllFilters(),f=!0,p.filter()}),t.setAttribute("data-filter-setup","setup")}),e=document.querySelectorAll("[data-set-filter-selector]:not([data-set-filter-setup])"),Array.prototype.forEach.call(e,function(l){l.addEventListener("click",function(){var t=l.getAttribute("data-set-filter-selector"),e=document.querySelector(t);null!==e?null!==e.getAttribute("data-filter-selector")?(e.value=l.textContent,p.filter()):console.warn("Query Selector from Attribute [data-set-filter-selector = "+t+"] did a valid filter element that has [data-filter-selector] defined."):console.warn("Query Selector from Attribute [data-set-filter-selector = "+t+"] did not return an element.")}),l.setAttribute("data-set-filter-setup","setup")}),p.filter()},onRendered:function(t){this.setupDataLists(t),this.setupFilters(t)}};app.addPlugin("filter",p)}();