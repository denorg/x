!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Rimu=t():e.Rimu=t()}(this,function(){return d=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s,n=r(2),i=r(3),c=r(1),a=r(7);function l(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}function u(e,t){return t.macros&&(e=i.render(e)),t.spans?e=a.render(e):t.specials&&(e=l(e)),e}t.escapeRegExp=function(e){return e.replace(/[\-\/\\^$*+?.()|\[\]{}]/g,"\\$&")},t.replaceSpecialChars=l,t.replaceMatch=function(r,e,n){return void 0===n&&(n={}),e.replace(/(\${1,2})(\d)/g,function(){"$$"===arguments[1]?n.spans=!0:n.specials=!0;var e=Number(arguments[2]),t=r[e];return void 0===t?(c.errorCallback("undefined replacement group: "+arguments[0]),""):u(t,n)})},t.copy=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},t.merge=function(e,t){for(var r in t)e[r]=t[r]},t.replaceInline=u,(o=t.BlockAttributes||(t.BlockAttributes={})).init=function(){o.classes="",o.id="",o.css="",o.attributes="",o.options={},s=[]},o.parse=function(e){var t=e[0];t=u(t,{macros:!0});var r=/^\\?\.((?:\s*[a-zA-Z][\w\-]*)+)*(?:\s*)?(#[a-zA-Z][\w\-]*\s*)?(?:\s*)?(?:"(.+?)")?(?:\s*)?(\[.+])?(?:\s*)?([+-][ \w+-]+)?$/.exec(t);return!!r&&(c.skipBlockAttributes()||(r[1]&&(o.classes+=" "+r[1].trim(),o.classes=o.classes.trim()),r[2]&&(o.id=r[2].trim().slice(1)),r[3]&&(o.css&&";"!==o.css.substr(-1)&&(o.css+=";"),o.css+=" "+r[3].trim(),o.css=o.css.trim()),r[4]&&!c.isSafeModeNz()&&(o.attributes+=" "+r[4].slice(1,r[4].length-1).trim(),o.attributes=o.attributes.trim()),n.setBlockOptions(o.options,r[5])),!0)},o.inject=function(e,t){if(void 0===t&&(t=!0),!e)return e;var r,n="";if(o.classes&&((r=/^(<[^>]*class=")(.*?)"/i).test(e)?e=e.replace(r,"$1"+o.classes+' $2"'):n='class="'+o.classes+'"'),o.id){o.id=o.id.toLowerCase();var i=/^<[^<]*id=".*?"/i.test(e);i||-1<s.indexOf(o.id)?c.errorCallback("duplicate 'id' attribute: "+o.id):s.push(o.id),i||(n+=' id="'+o.id+'"')}if(o.css&&((r=/^(<[^>]*style=")(.*?)"/i).test(e)?e=e.replace(r,function(e,t,r){return(r=r.trim())&&";"!==r.substr(-1)&&(r+=";"),""+t+r+" "+o.css+'"'}):n+=' style="'+o.css+'"'),o.attributes&&(n+=" "+o.attributes),n=n.trim()){var a=e.match(/^<([a-zA-Z]+|h[1-6])(?=[ >])/);if(a)e=e.slice(0,a[0].length)+" "+n+e.slice(a[0].length)}return t&&(o.classes="",o.id="",o.css="",o.attributes=""),e},o.slugify=function(e){var t=e.replace(/\W+/g,"-").replace(/-+/g,"-").replace(/(^-)|(-$)/g,"").toLowerCase();if(t=t||"x",-1<s.indexOf(t)){for(var r=2;-1<s.indexOf(t+"-"+r);)r++;t+="-"+r}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s,c,l=r(4),n=r(0);function i(e){for(var t in e)switch(t){case"reset":case"safeMode":case"htmlReplacement":case"callback":break;default:return void u("illegal API option name: "+t)}var r,n,i,a;"callback"in e&&(c=e.callback),"reset"in e&&(!1!==(r=e.reset)&&"false"!==r&&(!0===r||"true"===r?l.init():u("illegal reset API option value: "+r))),"callback"in e&&(c=e.callback),"safeMode"in e&&(n=e.safeMode,i=Number(n),isNaN(i)||i<0||15<i?u("illegal safeMode API option value: "+n):o=i),"htmlReplacement"in e&&void 0!==(a=e.htmlReplacement)&&(s=a)}function u(e){c&&c({type:"error",text:e})}t.init=function(){s="<mark>replaced HTML</mark>",c=void(o=0)},t.isSafeModeNz=function(){return 0!==o},t.getSafeMode=function(){return o},t.skipMacroDefs=function(){return 0!==o&&0==(8&o)},t.skipBlockAttributes=function(){return 0!=(4&o)},t.updateOptions=i,t.setOption=function(e,t){var r={};r[e]=t,i(r)},t.htmlSafeModeFilter=function(e){switch(3&o){case 0:return e;case 1:return"";case 2:return s;case 3:return n.replaceSpecialChars(e);default:return""}},t.errorCallback=u,t.panic=function(e){var t="panic: "+e;console.error(t),u(t)}},function(e,m,t){"use strict";var g=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n};Object.defineProperty(m,"__esModule",{value:!0});var h=t(4),a=t(3),v=t(1),b=t(0),x=t(0),r=/^(a|abbr|acronym|address|b|bdi|bdo|big|blockquote|br|cite|code|del|dfn|em|i|img|ins|kbd|mark|q|s|samp|small|span|strike|strong|sub|sup|time|tt|u|var|wbr)$/i,n=[{openMatch:a.LITERAL_DEF_OPEN,closeMatch:a.LITERAL_DEF_CLOSE,openTag:"",closeTag:"",expansionOptions:{macros:!0},delimiterFilter:s,contentFilter:l},{openMatch:a.EXPRESSION_DEF_OPEN,closeMatch:a.EXPRESSION_DEF_CLOSE,openTag:"",closeTag:"",expansionOptions:{macros:!0},delimiterFilter:s,contentFilter:l},{name:"comment",openMatch:/^\\?\/\*+$/,closeMatch:/^\*+\/$/,openTag:"",closeTag:"",expansionOptions:{skip:!0,specials:!0}},{name:"division",openMatch:/^\\?(\.{2,})([\w\s-]*)$/,openTag:"<div>",closeTag:"</div>",expansionOptions:{container:!0,specials:!0},delimiterFilter:c},{name:"quote",openMatch:/^\\?("{2,})([\w\s-]*)$/,openTag:"<blockquote>",closeTag:"</blockquote>",expansionOptions:{container:!0,specials:!0},delimiterFilter:c},{name:"code",openMatch:/^\\?(-{2,}|`{2,})([\w\s-]*)$/,openTag:"<pre><code>",closeTag:"</code></pre>",expansionOptions:{macros:!1,specials:!0},verify:function(e){return!("-"===e[1][0]&&""!==e[2].trim())},delimiterFilter:c},{name:"html",openMatch:/^(<!--.*|<!DOCTYPE(?:\s.*)?|<\/?([a-z][a-z0-9]*)(?:[\s>].*)?)$/i,closeMatch:/^$/,openTag:"",closeTag:"",expansionOptions:{macros:!0},verify:function(e){return!e[2]||!r.test(e[2])},delimiterFilter:s,contentFilter:v.htmlSafeModeFilter},{name:"indented",openMatch:/^\\?(\s+\S.*)$/,closeMatch:/^$/,openTag:"<pre><code>",closeTag:"</code></pre>",expansionOptions:{macros:!1,specials:!0},delimiterFilter:s,contentFilter:function(e){var r=e.search(/\S/);return e.split("\n").map(function(e){var t=e.search(/\S|$/);return r<t&&(t=r),e.slice(t)}).join("\n")}},{name:"quote-paragraph",openMatch:/^\\?(>.*)$/,closeMatch:/^$/,openTag:"<blockquote><p>",closeTag:"</p></blockquote>",expansionOptions:{macros:!0,spans:!0,specials:!0},delimiterFilter:s,contentFilter:function(e){return e.split("\n").map(function(e){return e.replace(/^>/,"").replace(/^\\>/,">")}).join("\n")}},{name:"paragraph",openMatch:/(.*)/,closeMatch:/^$/,openTag:"<p>",closeTag:"</p>",expansionOptions:{macros:!0,spans:!0,specials:!0},delimiterFilter:s}];function i(t){return m.defs.filter(function(e){return e.name===t})[0]}function o(e,t){if(t)for(var r=0,n=t.trim().split(/\s+/);r<n.length;r++){var i=n[r];v.isSafeModeNz()&&"-specials"===i?v.errorCallback("-specials block option not valid in safeMode"):/^[+-](macros|spans|specials|container|skip)$/.test(i)?e[i.slice(1)]="+"===i[0]:v.errorCallback("illegal block option: "+i)}}function s(e){return e[1]}function c(e){if(e[2]){var t;(t=e[2].trim())&&(x.BlockAttributes.classes=t)}return this.closeMatch=RegExp("^"+b.escapeRegExp(e[1])+"$"),""}function l(e,t,r){var n=t[0][t[0].length-t[1].length-1],i=t[0].match(/^{([\w\-]+\??)}/)[1];return e=(e=e.replace(RegExp("("+n+") *\\\\\\n","g"),"$1\n")).replace(RegExp("("+n+" *[\\\\]+)\\\\\\n","g"),"$1\n"),e=b.replaceInline(e,r),a.setValue(i,e,n),""}m.init=function(){m.defs=n.map(function(e){return b.copy(e)}),m.defs.forEach(function(e,t){return e.expansionOptions=b.copy(n[t].expansionOptions)})},m.render=function(e,t,r){void 0===r&&(r=[]),e.eof()&&v.panic("premature eof");for(var n=0,i=m.defs;n<i.length;n++){var a=i[n];if(!(0<r.length&&-1===r.indexOf(a.name?a.name:""))){var o=e.cursor.match(a.openMatch);if(o){if("\\"===o[0][0]&&"paragraph"!==a.name){e.cursor=e.cursor.slice(1);continue}if(a.verify&&!a.verify(o))continue;var s=a.delimiterFilter?a.delimiterFilter(o):"",c=[];s&&c.push(s),e.next();var l=e.readTo(a.closeMatch);null===l&&v.errorCallback("unterminated delimited block: "+o[0]),l&&(c=g(c,l));var u={macros:!1,spans:!1,specials:!1,container:!1,skip:!1};if(b.merge(u,a.expansionOptions),b.merge(u,x.BlockAttributes.options),!u.skip){var p=c.join("\n");a.contentFilter&&(p=a.contentFilter(p,o,u));var f=a.openTag;"html"===a.name?p=x.BlockAttributes.inject(p):f=x.BlockAttributes.inject(f),p=u.container?(delete x.BlockAttributes.options.container,h.render(p)):b.replaceInline(p,u);var d=a.closeTag;"division"===a.name&&"<div>"===f&&(d=f=""),t.write(f),t.write(p),t.write(d),(f||p||d)&&!e.eof()&&t.write("\n")}return x.BlockAttributes.options={},!0}}}return!1},m.getDefinition=i,m.setBlockOptions=o,m.setDefinition=function(e,t){var r=i(e);if(r){var n=t.trim().match(/^(?:(<[a-zA-Z].*>)\|(<[a-zA-Z/].*>))?(?:\s*)?([+-][ \w+-]+)?$/);null!==n?(n[1]&&(r.openTag=n[1],r.closeTag=n[2]),n[3]&&o(r.expansionOptions,n[3])):v.errorCallback("illegal delimited block definition: |"+e+"|='"+t+"'")}else v.errorCallback("illegal delimited block name: "+e+": |"+e+"|='"+t+"'")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Options=__webpack_require__(1),Spans=__webpack_require__(7);function init(){exports.defs=[{name:"--",value:""},{name:"--header-ids",value:""}]}function getValue(e){for(var t=0,r=exports.defs;t<r.length;t++){var n=r[t];if(n.name===e)return n.value}return null}function setValue(name,value,quote){if(!Options.skipMacroDefs()){var existential=!1;if("?"===name.slice(-1)&&(name=name.slice(0,-1),existential=!0),"--"!==name||""===value){if("`"===quote)try{value=eval(value)}catch(e){Options.errorCallback("illegal macro expression: "+e.message+": "+value)}for(var _i=0,defs_2=exports.defs;_i<defs_2.length;_i++){var def=defs_2[_i];if(def.name===name)return void(existential||(def.value=value))}exports.defs.push({name:name,value:value})}else Options.errorCallback("the predefined blank '--' macro cannot be redefined")}}function render(u,p){void 0===p&&(p=!1);var f=/\\?{([\w\-]+)()}/g,e=u;return[f,/\\?{([\w\-]+)([!=|?](?:|[^]*?[^\\]))}/g].forEach(function(l){e=e.replace(l,function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if("\\"===t[0])return t.slice(1);var n=e[0],i=e[1]||"";if("?"===i[0])return p||Options.errorCallback("existential macro invocations are deprecated: "+t),t;var a=getValue(n);if(null===a)return p||Options.errorCallback("undefined macro: "+t+": "+u),t;if(l===f)return a;switch((i=i.replace(/\\}/g,"}"))[0]){case"|":var o=i.slice(1).split("|");return a=(a||"").replace(/\\?(\$\$?)(\d+)(\\?:(|[^]*?[^\\])\$)?/g,function(e,t,r,n,i){if("\\"===e[0])return e.slice(1);if(0===Number(r))return e;var a=o[Number(r)-1];return a=void 0===a?"":a,void 0!==n&&("\\"===n[0]?a+=n.slice(1):""===a&&(a=(a=i).replace(/\\\$/g,"$"))),"$$"===t&&(a=Spans.render(a)),a});case"!":case"=":var s=i.slice(1),c=!1;try{c=!RegExp("^"+s+"$").test(a||"")}catch(e){return p||Options.errorCallback("illegal macro regular expression: "+s+": "+u),t}return"!"===i[0]&&(c=!c),c?"":"";default:return Options.errorCallback("illegal macro syntax: "+t[0]),""}})}),-1!==e.indexOf("")&&(e=e.split("\n").filter(function(e){return-1===e.indexOf("")}).join("\n")),e}exports.MATCH_LINE=/^({(?:[\w\-]+)(?:[!=|?](?:|.*?[^\\]))?}).*$/,exports.LINE_DEF=/^\\?{([\w\-]+\??)}\s*=\s*(['`])(.*)\2$/,exports.LITERAL_DEF_OPEN=/^\\?{[\w\-]+\??}\s*=\s*'(.*)$/,exports.LITERAL_DEF_CLOSE=/^(.*)'$/,exports.EXPRESSION_DEF_OPEN=/^\\?{[\w\-]+\??}\s*=\s*`(.*)$/,exports.EXPRESSION_DEF_CLOSE=/^(.*)`$/,exports.defs=[],exports.init=init,exports.getValue=getValue,exports.setValue=setValue,exports.render=render},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(8),a=r(9),o=r(11),s=r(3),c=r(1),l=r(5),u=r(6),p=r(0);t.render=function(e){for(var t=new i.Reader(e),r=new i.Writer;!t.eof()&&(t.skipBlankLines(),!t.eof());)a.render(t,r)||o.render(t,r)||n.render(t,r)||c.panic("no matching delimited block found");return r.toString()},t.init=function(){p.BlockAttributes.init(),c.init(),n.init(),s.init(),l.init(),u.init()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n,a=r(0),o=[{quote:"**",openTag:"<strong>",closeTag:"</strong>",spans:!0},{quote:"*",openTag:"<em>",closeTag:"</em>",spans:!0},{quote:"__",openTag:"<strong>",closeTag:"</strong>",spans:!0},{quote:"_",openTag:"<em>",closeTag:"</em>",spans:!0},{quote:"``",openTag:"<code>",closeTag:"</code>",spans:!1},{quote:"`",openTag:"<code>",closeTag:"</code>",spans:!1},{quote:"~~",openTag:"<del>",closeTag:"</del>",spans:!0}];function s(){var e=i.map(function(e){return a.escapeRegExp(e.quote)});t.quotesRe=RegExp("\\\\?("+e.join("|")+")([^\\s\\\\]|\\S[\\s\\S]*?[^\\s\\\\])\\1","g"),n=RegExp("\\\\("+e.join("|")+")","g")}t.init=function(){i=o.map(function(e){return a.copy(e)}),s()},t.initializeRegExps=s,t.getDefinition=function(t){return i.filter(function(e){return e.quote===t})[0]},t.unescape=function(e){return e.replace(n,"$1")},t.setDefinition=function(e){for(var t=0,r=i;t<r.length;t++){var n=r[t];if(n.quote===e.quote)return n.openTag=e.openTag,n.closeTag=e.closeTag,void(n.spans=e.spans)}2===e.quote.length?i.unshift(e):i.push(e),s()}},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t(1),n=t(0),i=[{match:/\\?<<#([a-zA-Z][\w\-]*)>>/g,replacement:'<span id="$1"></span>',filter:function(e){return r.skipBlockAttributes()?"":n.replaceMatch(e,this.replacement)}},{match:/\\?<image:([^\s|]+)\|([^]*?)>/g,replacement:'<img src="$1" alt="$2">'},{match:/\\?<image:([^\s|]+?)>/g,replacement:'<img src="$1" alt="$1">'},{match:/\\?!\[([^[]*?)]\((\S+?)\)/g,replacement:'<img src="$2" alt="$1">'},{match:/\\?<(\S+@[\w.\-]+)\|([^]+?)>/g,replacement:'<a href="mailto:$1">$$2</a>'},{match:/\\?<(\S+@[\w.\-]+)>/g,replacement:'<a href="mailto:$1">$1</a>'},{match:/\\?\[([^[]*?)]\((\S+?)\)/g,replacement:'<a href="$2">$$1</a>'},{match:/\\?<(\S+?)\|([^]*?)>/g,replacement:'<a href="$1">$$2</a>'},{match:/\\?(<!--(?:[^<>&]*)?-->|<\/?([a-z][a-z0-9]*)(?:\s+[^<>&]+)?>)/gi,replacement:"",filter:function(e){return r.htmlSafeModeFilter(e[1])}},{match:/\\?<([^|\s]+?)>/g,replacement:'<a href="$1">$1</a>'},{match:/\\?((?:http|https):\/\/[^\s"']*[A-Za-z0-9/#])/g,replacement:'<a href="$1">$1</a>'},{match:/\\?(&[\w#][\w]+;)/g,replacement:"",filter:function(e){return e[1]}},{match:/[\\ ]\\(\n|$)/g,replacement:"<br>$1"},{match:/(\S\\)(?=`)/g,replacement:"$1"},{match:/([a-zA-Z0-9]_)(?=[a-zA-Z0-9])/g,replacement:"$1"}];o.init=function(){o.defs=i.map(function(e){return n.copy(e)})},o.setDefinition=function(e,t,r){/g/.test(t)||(t+="g");for(var n=0,i=o.defs;n<i.length;n++){var a=i[n];if(a.match.source===e)return a.match=new RegExp(e,t),void(a.replacement=r)}o.defs.push({match:new RegExp(e,t),replacement:r})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l=r(5),i=r(6),u=r(0);t.render=function(e){var t,r=[{text:function(e){var r;return i.defs.forEach(function(t){r=[],e.forEach(function(e){r.push.apply(r,function e(t,r){if(t.done)return[t];var n,i=r.match;if(i.lastIndex=0,!(n=i.exec(t.text)))return[t];var a,o=[],s=n.input.slice(0,n.index),c=n.input.slice(i.lastIndex);return o.push({text:s,done:!1}),a="\\"===n[0][0]?u.replaceSpecialChars(n[0].slice(1)):r.filter?r.filter(n):u.replaceMatch(n,r.replacement),o.push({text:a,done:!0,verbatim:n[0]}),o.push.apply(o,e({text:c,done:!1},r)),o}(e,t))}),e=r}),e}([{text:e,done:!(n=[])}]).reduce(function(e,t){return t.done?(n.push(t),e+"\0"):e+t.text},""),done:!1}];return t=[],r.forEach(function(e){t.push.apply(t,function e(t){if(t.done)return[t];var r,n=l.quotesRe;for(n.lastIndex=0;;){if(!(r=n.exec(t.text)))return[t];if("\\"!==r[0][0])break;n.lastIndex=r.index+r[1].length+1}for(var i=[],a=l.getDefinition(r[1]);t.text[n.lastIndex]===r[1][0];)r[2]+=r[1][0],n.lastIndex+=1;var o=r.input.slice(0,r.index),s=r[2],c=r.input.slice(n.lastIndex);return i.push({text:o,done:!1}),i.push({text:a.openTag,done:!0}),a.spans?i.push.apply(i,e({text:s,done:!1})):(s=(s=u.replaceSpecialChars(s)).replace(/\u0000/g,""),i.push({text:s,done:!0})),i.push({text:a.closeTag,done:!0}),i.push.apply(i,e({text:c,done:!1})),i}(e))}),t.filter(function(e){return!e.done}).forEach(function(e){return e.text=l.unescape(e.text)}),(r=t).filter(function(e){return!e.done}).forEach(function(e){return e.text=u.replaceSpecialChars(e.text)}),r.reduce(function(e,t){return e+t.text},"").replace(/[\u0000\u0001]/g,function(e){var t=n.shift();return"\0"===e?t.text:u.replaceSpecialChars(t.verbatim)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"cursor",{get:function(){return console.assert(!this.eof()),this.lines[this.pos]},set:function(e){console.assert(!this.eof()),this.lines[this.pos]=e},enumerable:!0,configurable:!0}),i.prototype.eof=function(){return this.pos>=this.lines.length},i.prototype.next=function(){this.eof()||this.pos++},i.prototype.readTo=function(e){for(var t=[],r=null;!this.eof();){if(r=this.cursor.match(e)){void 0!==r[1]&&t.push(r[1]),this.next();break}t.push(this.cursor),this.next()}return r||"/^$/"===e.toString()&&this.eof()?t:null},i.prototype.skipBlankLines=function(){for(;!this.eof()&&""===this.cursor.trim();)this.next()},i);function i(e){e=(e=(e=e.replace("\0"," ")).replace(""," ")).replace(""," "),this.lines=e.split(/\r\n|\r|\n/g),this.pos=0}t.Reader=n;var a=(o.prototype.write=function(e){this.buffer.push(e)},o.prototype.toString=function(){return this.buffer.join("")},o);function o(){this.buffer=[]}t.Writer=a},function(e,t,r){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n};Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),a=r(3),c=r(1),o=r(5),s=r(6),l=r(0),u=r(0),p=[{match:/^\\?\/{2}(.*)$/},{match:a.MATCH_LINE,verify:function(e,t){if(a.LITERAL_DEF_OPEN.test(e[0])||a.EXPRESSION_DEF_OPEN.test(e[0]))return!1;var r=a.render(e[0],!0);if(r.substr(0,e[0].length)===e[0]||0<=r.indexOf("\n"+e[0]))return!1;var n=i([t.pos+1,0],r.split("\n"));return Array.prototype.splice.apply(t.lines,n),!0},filter:function(e,t){return""}},{match:/^\\?\|([\w\-]+)\|\s*=\s*'(.*)'$/,filter:function(e){return c.isSafeModeNz()||(e[2]=l.replaceInline(e[2],{macros:!0}),n.setDefinition(e[1],e[2])),""}},{match:/^(\S{1,2})\s*=\s*'([^|]*)(\|{1,2})(.*)'$/,filter:function(e){return c.isSafeModeNz()||o.setDefinition({quote:e[1],openTag:l.replaceInline(e[2],{macros:!0}),closeTag:l.replaceInline(e[4],{macros:!0}),spans:"|"===e[3]}),""}},{match:/^\\?\/(.+)\/([igm]*)\s*=\s*'(.*)'$/,filter:function(e){if(c.isSafeModeNz())return"";var t=e[1],r=e[2],n=e[3];return n=l.replaceInline(n,{macros:!0}),s.setDefinition(t,r,n),""}},{match:a.LINE_DEF,filter:function(e){var t=e[1],r=e[2],n=e[3];return n=l.replaceInline(n,{macros:!0}),a.setValue(t,n,r),""}},{match:/^\\?([#=]{1,6})\s+(.+?)(?:\s+\1)?$/,replacement:"<h$1>$$2</h$1>",filter:function(e){return e[1]=e[1].length.toString(),a.getValue("--header-ids")&&""===u.BlockAttributes.id&&(u.BlockAttributes.id=u.BlockAttributes.slugify(e[2])),l.replaceMatch(e,this.replacement,{macros:!0})}},{match:/^\\?<image:([^\s|]+)\|([^]+?)>$/,replacement:'<img src="$1" alt="$2">'},{match:/^\\?<image:([^\s|]+?)>$/,replacement:'<img src="$1" alt="$1">'},{match:/^\\?<<#([a-zA-Z][\w\-]*)>>$/,replacement:'<div id="$1"></div>',filter:function(e,t){return c.skipBlockAttributes()?"":l.replaceMatch(e,this.replacement,{macros:!0})}},{name:"attributes",match:/^\\?\.[a-zA-Z#"\[+-].*$/,verify:function(e){return u.BlockAttributes.parse(e)}},{match:/^\\?\.(\w+)\s*=\s*'(.*)'$/,filter:function(e){if(!c.isSafeModeNz()){var t=l.replaceInline(e[2],{macros:!0});c.setOption(e[1],t)}return""}}];t.render=function(e,t,r){void 0===r&&(r=[]),e.eof()&&c.panic("premature eof");for(var n=0,i=p;n<i.length;n++){var a=i[n];if(!(0<r.length&&-1===r.indexOf(a.name?a.name:""))){var o=a.match.exec(e.cursor);if(o){if("\\"===o[0][0]){e.cursor=e.cursor.slice(1);continue}if(a.verify&&!a.verify(o,e))continue;var s=void 0;return(s=a.filter?a.filter(o,e):a.replacement?l.replaceMatch(o,a.replacement,{macros:!0}):"")?(s=u.BlockAttributes.inject(s),t.write(s),e.next(),e.eof()||t.write("\n")):e.next(),!0}}}return!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(1);t.render=function(e,t){return void 0===t&&(t={}),i.updateOptions(t),n.render(e)},n.init()},function(e,t,r){"use strict";var f=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n};Object.defineProperty(t,"__esModule",{value:!0});var d,m=r(2),g=r(8),n=r(9),i=r(1),h=r(0),v=r(0),o=[{match:/^\\?\s*(-|\+|\*{1,4})\s+(.*)$/,listOpenTag:"<ul>",listCloseTag:"</ul>",itemOpenTag:"<li>",itemCloseTag:"</li>"},{match:/^\\?\s*(?:\d*)(\.{1,4})\s+(.*)$/,listOpenTag:"<ol>",listCloseTag:"</ol>",itemOpenTag:"<li>",itemCloseTag:"</li>"},{match:/^\\?\s*(.*[^:])(:{2,4})(|\s+.*)$/,listOpenTag:"<dl>",listCloseTag:"</dl>",itemOpenTag:"<dd>",itemCloseTag:"</dd>",termOpenTag:"<dt>",termCloseTag:"</dt>"}];function b(e,t,r){var n;for(d.push(e.id),r.write(v.BlockAttributes.inject(e.def.listOpenTag));;){if(!(n=a(e,t,r))||n.id!==e.id)return r.write(e.def.listCloseTag),d.pop(),n;e=n}}function a(e,t,r){var n,i=e.def,a=e.match;4===a.length&&(r.write(v.BlockAttributes.inject(i.termOpenTag,!1)),v.BlockAttributes.id="",n=h.replaceInline(a[1],{macros:!0,spans:!0}),r.write(n),r.write(i.termCloseTag)),r.write(v.BlockAttributes.inject(i.itemOpenTag));var o=new g.Writer;n=a[a.length-1],o.write(n+"\n"),t.next();for(var s,c,l=new g.Writer,u=!1;;){if(2<=(s=x(t,l))||-1===s){c=null;break}if(c=$(t)){-1!==d.indexOf(c.id)||(c=b(c,t,l));break}if(u)break;if(0===s){var p=d;d=[],m.render(t,l,["comment","code","division","html","quote"])?u=!0:(o.write(t.cursor+"\n"),t.next()),d=p}else if(1===s){if(!m.render(t,l,["indented","quote-paragraph"]))break;u=!0}}return n=o.toString().trim(),n=h.replaceInline(n,{macros:!0,spans:!0}),r.write(n),r.buffer=f(r.buffer,l.buffer),r.write(i.itemCloseTag),c}function x(e,t){for(var r=0;;){if(e.eof())return-1;if(!n.render(e,t,["attributes"])){if(""!==e.cursor)return r;r++,e.next()}}}function $(e){if(e.eof())return null;for(var t={},r=0,n=o;r<n.length;r++){var i=n[r],a=i.match.exec(e.cursor);if(a)return"\\"===a[0][0]?(e.cursor=e.cursor.slice(1),null):(t.match=a,t.def=i,t.id=a[a.length-2],t)}return null}t.render=function(e,t){var r;return e.eof()&&i.panic("premature eof"),!!(r=$(e))&&(d=[],b(r,e,t),0!==d.length&&i.panic("list stack failure"),!0)}}],e={},f.m=d,f.c=e,f.d=function(e,t,r){f.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(t,e){if(1&e&&(t=f(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(f.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)f.d(r,n,function(e){return t[e]}.bind(null,n));return r},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="",f(f.s=10);function f(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return d[t].call(r.exports,r,r.exports,f),r.l=!0,r.exports}var d,e});
//# sourceMappingURL=rimu.min.js.map